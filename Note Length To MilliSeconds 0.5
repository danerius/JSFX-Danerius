/////////////////////////////////////////////////////////////////
// Copyright (c) 2020. Bo Danerius                             //
// Permission to use, copy, modify, and/or distribute this     //
// software for any purpose with or without fee is hereby      //
// granted, provided that the above copyright notice and this  //
// permission notice appear in all copies.
/////////////////////////////////////////////////////////////////

desc:Note Length To Milliseconds 0.5 Danerius

slider1:5<0,10,1{1/1, 1/2, 1/4, 1/8, 1/16, 1/32, 1/64, 1/128, 1/256, 1/512, 1/1024}>Note Length
//slider1:5<1,10,1>Note Length

//remove metering
in_pin:none
out_pin:none

@block 
firstrun == 0 ? notecalc();

@init

function notecalc(slider)
  (
    notevalue = (srate*5)/tempo;    
  );

@slider
factor = 0.5/(0.5 * pow(2,slider1));
//=====================================================================
@gfx 660 150
gfx_setfont(1,"courier bold", 15);

gfx_x = gfx_y = 20; //x, y position
gfx_r = 1; gfx_g = 1; gfx_b = 0; gfx_a = 1; //Yellow RGB plus alpha
gfx_drawstr("Note Length To Milliseconds.");

gfx_r = 1; gfx_g = 1; gfx_b = 1; gfx_a = 1; //White RGB plus alpha
gfx_drawstr(" 1/"); gfx_drawnumber(1/factor,0); gfx_drawstr(" Note.");

gfx_r = 1; gfx_g = 1; gfx_b = 0; gfx_a = 1; //Yellow RGB plus alpha

gfx_drawstr(" @"); gfx_drawnumber(tempo,0); gfx_drawstr(" BPM. ");
gfx_x = 20; gfx_y = gfx_y + (gfx_texth * 2.2);

///////////////////////////////////////////////////////////////////////
gfx_r = gfx_g = gfx_b = 0.8; gfx_a = 1;
gfx_line(16,44,640,44);

gfx_r = 1; gfx_g = 1; gfx_b = 0; gfx_a = 1; //Yellow RGB plus alpha
gfx_drawstr("Straight:");
gfx_drawnumber((notevalue * factor),1); gfx_drawstr(" ms"); 

gfx_x = 195; gfx_drawstr("Dotted:");
gfx_drawnumber((notevalue * factor  * 1.5),1); gfx_drawstr(" ms");

gfx_x = 360; gfx_drawstr("Triplet:");
gfx_drawnumber((notevalue * factor * 0.666666666),1); gfx_drawstr(" ms");
gfx_x = 20; gfx_y = gfx_y + (gfx_texth * 2);

///////////////////////////////////////////////////////////////////////
gfx_r = gfx_g = gfx_b = 0.8; gfx_a = 1;
gfx_line(16,76,640,76);

gfx_setfont(1,"courier bold", 13);
gfx_r = 1; gfx_g = 1; gfx_b = 0; gfx_a = 1; //Yellow RGB plus alpha
//gfx_drawstr("Tuplets:");

gfx_drawstr("| 1/5 = "); gfx_drawnumber(((notevalue * factor)*0.2),1); gfx_drawstr(" ms"); 
gfx_drawstr(" | 2/5 = "); gfx_drawnumber(((notevalue * factor)*0.4),1); gfx_drawstr(" ms"); 
gfx_drawstr(" | 3/5 = "); gfx_drawnumber(((notevalue * factor)*0.6),1); gfx_drawstr(" ms"); 
gfx_drawstr(" | 4/5 = "); gfx_drawnumber(((notevalue * factor)*0.8),1); gfx_drawstr(" ms"); 
gfx_drawstr(" |");
gfx_x = 20; gfx_y = gfx_y + (gfx_texth * 2);

///////////////////////////////////////////////////////////////////////


gfx_r = gfx_g = gfx_b = 0.8; gfx_a = 1;
gfx_line(16,103,640,103);

gfx_setfont(1,"courier bold", 10);
gfx_r = 1; gfx_g = 1; gfx_b = 0; gfx_a = 1; //Yellow RGB plus alpha
gfx_drawstr("| 1/7 = ");  gfx_drawnumber(((notevalue * factor)*0.14286),1); gfx_drawstr(" ms"); 
gfx_drawstr(" | 2/7 = "); gfx_drawnumber(((notevalue * factor)*0.28571),1); gfx_drawstr(" ms"); 
gfx_drawstr(" | 3/7 = "); gfx_drawnumber(((notevalue * factor)*0.42857),1); gfx_drawstr(" ms"); 
gfx_drawstr(" | 4/7 = "); gfx_drawnumber(((notevalue * factor)*0.57142),1); gfx_drawstr(" ms"); 
gfx_drawstr(" | 5/7 = "); gfx_drawnumber(((notevalue * factor)*0.71428),1); gfx_drawstr(" ms"); 
gfx_drawstr(" | 6/7 = "); gfx_drawnumber(((notevalue * factor)*0.85714),1); gfx_drawstr(" ms"); 
gfx_drawstr(" |");

gfx_r = gfx_g = gfx_b = 0.8; gfx_a = 1;
gfx_line(16,124,640,124);

